<!--pages/exam/report.wxml-->
<view class="report-container">
  <!-- 考试成绩 -->
  <view class="score-section" wx:if="{{ examResult }}">
    <view class="score-title">考试成绩</view>
    <view class="score-display">
      <text class="score">{{ examResult.score }}</text>
      <text class="total">/{{ examResult.total }}</text>
    </view>
    <view class="score-info">
      <text>答对 {{ examResult.correctCount }} / {{ examResult.totalCount }} 题</text>
    </view>
  </view>

  <!-- 学习分析 -->
  <view class="analysis-section" wx:if="{{ examResult }}">
    <view class="section-title">学习分析</view>
    <view class="analysis-content">
      <view class="analysis-item">
        <text class="item-label">优势科目：</text>
        <text class="item-value" wx:for="{{ examResult.analysis.strongPoints }}" wx:key="index">{{ item }} </text>
      </view>
      <view class="analysis-item">
        <text class="item-label">薄弱环节：</text>
        <text class="item-value" wx:for="{{ examResult.analysis.weakPoints }}" wx:key="index">{{ item }} </text>
      </view>
    </view>
  </view>

  <!-- 学习报告 -->
  <view class="study-report-section" wx:if="{{ studyReport }}">
    <view class="section-title">学习报告</view>
    <view class="report-content">
      <view class="report-item">
        <text class="item-label">总学习时长：</text>
        <text class="item-value">{{ studyReport.totalStudyHours }} 小时</text>
      </view>
      <view class="report-item">
        <text class="item-label">已完成课程：</text>
        <text class="item-value">{{ studyReport.completedCourses }} 门</text>
      </view>
      <view class="report-item">
        <text class="item-label">考试次数：</text>
        <text class="item-value">{{ studyReport.totalExams }} 次</text>
      </view>
      <view class="report-item">
        <text class="item-label">平均成绩：</text>
        <text class="item-value">{{ studyReport.averageScore }}</text>
      </view>
      <view class="report-item">
        <text class="item-label">班级排名：</text>
        <text class="item-value">{{ studyReport.ranking }}</text>
      </view>
      <view class="report-item">
        <text class="item-label">进步幅度：</text>
        <text class="item-value">{{ studyReport.improvement }}</text>
      </view>
    </view>
  </view>

  <!-- 错题回顾 -->
  <view class="wrong-section" wx:if="{{ examResult && examResult.wrongQuestions.length > 0 }}">
    <view class="section-title">错题回顾</view>
    <view class="wrong-list">
      <view class="wrong-item" wx:for="{{ examResult.wrongQuestions }}" wx:key="id">
        <view class="wrong-question">{{ item.content }}</view>
        <view class="wrong-answers">
          <text>你的答案：{{ item.userAnswer }}</text>
          <text>正确答案：{{ item.correctAnswer }}</text>
        </view>
        <view class="wrong-explanation">{{ item.explanation }}</view>
      </view>
    </view>
  </view>

  <!-- 操作按钮 -->
  <view class="action-buttons">
    <button class="action-btn wrong-btn" bindtap="goToWrongQuestions">查看错题本</button>
    <button class="action-btn retake-btn" bindtap="retakeExam">重新考试</button>
    <button class="action-btn practice-btn" bindtap="continuePractice">继续练习</button>
  </view>
</view>
