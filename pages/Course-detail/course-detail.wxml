<!--pages/Course-detail/course-detail.wxml-->
<view class="course-detail-container">
  <!-- è¯¾ç¨‹åŸºæœ¬ä¿¡æ¯ -->
  <view class="course-header">
    <image class="course-cover" src="{{course.cover}}" />
    <view class="course-info">
      <text class="course-title">{{course.title}}</text>
      <text class="course-teacher">è®²å¸ˆï¼š{{course.teacher}}</text>
      <text class="course-desc">{{course.description}}</text>
      <view class="course-stats">
        <text class="stat">{{course.students}}äººå­¦ä¹ </text>
        <text class="stat">{{course.rating}}åˆ†</text>
      </view>
    </view>
  </view>

  <!-- é—®ç­”åŒºåŸŸ -->
  <view class="qa-section">
    <view class="qa-header">
      <text class="section-title">è¯¾ç¨‹é—®ç­”</text>
      <button class="ask-btn" bindtap="onAskQuestion">æˆ‘è¦æé—®</button>
    </view>

    <!-- é—®é¢˜åˆ—è¡¨ -->
    <view class="question-list">
      <block wx:for="{{questions}}" wx:key="id">
        <view class="question-item">
          <view class="question-header">
            <image class="user-avatar" src="{{item.asker.avatar}}" />
            <view class="question-meta">
              <text class="asker-name">{{item.asker.username}}</text>
              <text class="ask-time">{{item.askTime}}</text>
            </view>
          </view>
          <view class="question-content">
            <text>{{item.content}}</text>
          </view>
          <view class="question-stats">
            <text class="answer-count">{{item.answers}}ä¸ªå›ç­”</text>
            <text class="like-count">ğŸ‘ {{item.likes}}</text>
          </view>

          <!-- æœ€ä½³ç­”æ¡ˆ -->
          <block wx:if="{{item.bestAnswer}}">
            <view class="best-answer">
              <view class="answer-header">
                <image class="answer-avatar" src="{{item.bestAnswer.answerer.avatar}}" />
                <view class="answer-meta">
                  <text class="answerer-name">{{item.bestAnswer.answerer.username}}</text>
                  <block wx:if="{{item.bestAnswer.answerer.isTeacher}}">
                    <text class="teacher-tag">è®²å¸ˆ</text>
                  </block>
                  <text class="answer-time">{{item.bestAnswer.answerTime}}</text>
                </view>
              </view>
              <view class="answer-content">
                <text>{{item.bestAnswer.content}}</text>
              </view>
              <view class="answer-stats">
                <text class="answer-like">ğŸ‘ {{item.bestAnswer.likes}}</text>
                <text class="reward">å¥–åŠ± {{item.bestAnswer.rewardPoints}} ç§¯åˆ†</text>
              </view>
            </view>
          </block>

          <!-- æŸ¥çœ‹æ›´å¤šå›ç­” -->
          <button class="view-answers-btn" bindtap="viewAnswers" data-question="{{item}}">
            æŸ¥çœ‹æ›´å¤šå›ç­”
          </button>
        </view>
      </block>
    </view>
  </view>
</view>
